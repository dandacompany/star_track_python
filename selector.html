<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>STATRACK 1ê¸° ë°œí‘œ íˆì–´ë¡œ ë½‘ê¸°</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <style>
    :root {
      --size: 400px;      /* íšŒì „íŒ ì§€ë¦„ */
    }
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: auto;
    }
    
    .container {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      max-width: 90vw;
      max-height: 90vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      color: white;
    }
    
    h1 {
      text-align: center;
      margin-bottom: 2rem;
      font-size: 2rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    .wheel-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
      margin-top: 4rem;
      margin-bottom: 4rem;
    }
    
    .step-info {
      font-size: 1.2rem;
      font-weight: bold;
      text-align: center;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      min-height: 2rem;
    }
    
    canvas {
      width: var(--size);
      height: var(--size);
      border-radius: 50%;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      transition: transform 0.3s ease, filter 0.3s ease;
    }
    
    canvas:hover {
      transform: scale(1.02);
    }
    
    /* íšŒì „ ì¤‘ì¼ ë•Œ ë” ê°•í•œ ê·¸ë¦¼ì íš¨ê³¼ */
    canvas.spinning {
      box-shadow: 0 8px 40px rgba(0, 0, 0, 0.4);
      filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.3));
    }
    
    #spinBtn {
      padding: 1rem 3rem;
      font-size: 1.2rem;
      border: none;
      border-radius: 12px;
      background: linear-gradient(45deg, #ff6b6b, #ee5a52);
      color: #fff;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    
    #spinBtn:hover { 
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }
    
    #spinBtn:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }
    
    #result {
      font-size: 2.5rem;
      font-weight: 700;
      min-height: 3rem;
      text-align: center;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      display: none; /* ì²˜ìŒì—ëŠ” ì™„ì „íˆ ìˆ¨ê¹€ */
      opacity: 0;
      transform: scale(0.8);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    
    #result.show {
      display: block;
      opacity: 1;
      transform: scale(1);
    }
    
    .hidden {
      display: none;
    }
    
    .progress {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin: 1rem 0;
    }
    
    .progress-step {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }
    
    .progress-step.active {
      background: #ff6b6b;
      box-shadow: 0 0 15px rgba(255, 107, 107, 0.5);
    }
    
    .progress-step.completed {
      background: #4ecdc4;
    }
    
    /* í­ì£½ íŒŒí‹°í´ ìŠ¤íƒ€ì¼ */
    .firework-particle {
      position: fixed;
      pointer-events: none;
      border-radius: 50%;
      z-index: 9999;
    }
    
    .firework-spark {
      position: fixed;
      pointer-events: none;
      z-index: 9999;
    }
    
    .firework-trail {
      position: fixed;
      pointer-events: none;
      z-index: 9998;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¡ STATRACK 1ê¸° ë°œí‘œ ì˜ˆë¹„ ë¶„ì„ê°€ ë½‘ê¸° ğŸ¡</h1>
    
    <div class="progress">
      <div class="progress-step active" id="step1">1</div>
      <div class="progress-step" id="step2">2</div>
    </div>
    
    <div class="step-info" id="stepInfo">1ë‹¨ê³„: ê³¼ì—° ì–´ë–¤ ì¡°ê°€ ì„ íƒë  ê²ƒì¸ê°€...</div>
    
    <div class="wheel-container">
      <canvas id="wheel" width="420" height="420"></canvas>
      <button id="spinBtn">ğŸ² ëŒë¦¬ê¸°!</button>
      <div id="result"></div>
    </div>
  </div>

  <script>
    /****** ë©¤ë²„ ë°ì´í„° ******/
    const membersData = [
      { name: "ë…¸ìœ¤ì¬", team: "6" },
      { name: "ë°•ë™í›ˆ", team: "3" },
      { name: "ë°°ì •ì¸", team: "7" },
      { name: "ì¥í˜œì„±", team: "4" },
      { name: "ì¡°ì€ì£¼", team: "7" },
      { name: "ì†ë¯¼ìš°", team: "4" },
      { name: "ì´ëª…ì¬", team: "3" },
      { name: "ìµœì£¼í˜„", team: "1" },
      { name: "ê¹€ì¤€ìš°", team: "4" },
      { name: "ë°•ì€ë¹ˆ", team: "8" },
      { name: "ê¹€ì„ ì˜", team: "7" },
      { name: "ë¬¸ì£¼ì—°", team: "5" },
      { name: "í™©ì¸íƒ", team: "5" },
      { name: "ì¥í˜„ì˜", team: "1" },
      { name: "ê¹€ì–´ì§„", team: "4" },
      { name: "ê°•ë‚˜ì˜", team: "1" },
      { name: "ê¹€ê°€ì˜", team: "5" },
      { name: "ê¹€í•´ë¹ˆ", team: "8" },
      { name: "ë°•ì§€ìˆ˜", team: "3" },
      { name: "ì •í˜„ì¡°", team: "2" },
      { name: "í•œì •ì„", team: "6" },
      { name: "ì¡°ë°±ì°¬", team: "1" },
      { name: "ì¥ìœ¤ì„œ", team: "1" },
      { name: "ì†ìœ ì§„", team: "7" },
      { name: "ê¶Œì¤€í˜", team: "6" },
      { name: "ì „í˜•ë¯¼", team: "6" },
      { name: "ìœ ìŠ¹í˜„", team: "8" },
      { name: "ìœ¤ì´ë‚˜", team: "3" },
      { name: "ë°•ì¸ê¸°", team: "5" },
      { name: "ì •ì„±ì¤€", team: "8" },
      { name: "ì‹ ìœ¤ì‹", team: "7" },
      { name: "ë¯¼ê²½ì€", team: "8" },
      { name: "êµ¬ì„œì›", team: "2" },
      { name: "ìœ ì˜ˆì§€", team: "2" },
      { name: "ìµœìš°ì„", team: "5" },
      { name: "ì„œì¤€ì„", team: "6" }
    ];
    
    // ì¡°ë³„ë¡œ ê·¸ë£¹í•‘
    const teamGroups = {};
    membersData.forEach(member => {
      if (!teamGroups[member.team]) {
        teamGroups[member.team] = [];
      }
      teamGroups[member.team].push(member.name);
    });
    
    // ì¡° ëª©ë¡ ìƒì„± (1ì¡°~8ì¡°)
    const teams = Object.keys(teamGroups).sort((a, b) => Number(a) - Number(b)).map(team => `${team}ì¡°`);
    
    /************************************/

    const canvas = document.getElementById('wheel');
    const ctx = canvas.getContext('2d');
    const resultDiv = document.getElementById('result');
    const spinBtn = document.getElementById('spinBtn');
    const stepInfo = document.getElementById('stepInfo');
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    
    let currentStep = 1; // 1: ì¡° ì„ íƒ, 2: ë©¤ë²„ ì„ íƒ
    let selectedTeam = null;
    let currentItems = teams; // í˜„ì¬ íšŒì „íŒì— í‘œì‹œë  í•­ëª©ë“¤
    let slice, radius, center, colors;
    
    let rotation = 0;
    let velocity = 0;
    let spinning = false;
    let rafId;

    // íšŒì „íŒ ì´ˆê¸°í™”
    function initializeWheel() {
      slice = (2 * Math.PI) / currentItems.length;
      radius = canvas.width / 2 - 10;
      center = { x: canvas.width / 2, y: canvas.height / 2 };
      
      colors = currentItems.map((_, i) => `hsl(${360 * i / currentItems.length}, 75%, 65%)`);
      
      drawWheel();
    }

    // íšŒì „íŒ ê·¸ë¦¬ê¸°
    function drawWheel() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.save();
      ctx.translate(center.x, center.y);
      ctx.rotate(rotation);

      currentItems.forEach((txt, i) => {
        // íŒŒì´ ì¡°ê°
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.arc(0, 0, radius, i * slice, (i + 1) * slice);
        ctx.closePath();
        ctx.fillStyle = colors[i];
        ctx.fill();
        
        // í…Œë‘ë¦¬
        ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
        ctx.lineWidth = 2;
        ctx.stroke();

        // í…ìŠ¤íŠ¸
        ctx.save();
        ctx.rotate(i * slice + slice / 2);
        ctx.translate(radius * 0.7, 0);
        ctx.rotate(Math.PI / 2);
        ctx.fillStyle = "#fff";
        ctx.font = "bold 16px sans-serif";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
        ctx.shadowBlur = 3;
        ctx.fillText(txt, 0, 0);
        ctx.restore();
      });

      ctx.restore();
      drawPointer();
    }

    // í™”ì‚´í‘œ ê·¸ë¦¬ê¸°
    function drawPointer() {
      ctx.fillStyle = "#333";
      ctx.strokeStyle = "#fff";
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(center.x, center.y - radius + 15);
      ctx.lineTo(center.x - 20, center.y - radius - 20);
      ctx.lineTo(center.x + 20, center.y - radius - 20);
      ctx.closePath();
      ctx.fill();
      ctx.stroke();
    }

    // íšŒì „ ì‹œì‘
    function spin() {
      if (spinning) return;
      
      // 3ë°° ë” ì˜¤ë˜ ëŒë„ë¡ ì´ˆê¸° ì†ë„ ëŒ€í­ ì¦ê°€
      velocity = Math.random() * 0.6 + 1.2;
      spinning = true;
      resultDiv.textContent = "";
      resultDiv.classList.remove('show'); // ê²°ê³¼ ì˜ì—­ ìˆ¨ê¹€
      spinBtn.disabled = true;
      spinBtn.textContent = "ëŒë¦¬ëŠ” ì¤‘...";
      canvas.classList.add('spinning'); // íšŒì „ ì¤‘ ìŠ¤íƒ€ì¼ ì ìš©
      rafId = requestAnimationFrame(step);
    }

    // íšŒì „ ì• ë‹ˆë©”ì´ì…˜ (ê·¹ì ì¸ ê°ì† íš¨ê³¼ ì¶”ê°€)
    function step() {
      rotation = (rotation + velocity) % (2 * Math.PI);
      
      // ë” ì„¸ë¶„í™”ëœ ë‹¨ê³„ì  ê°ì†ìœ¼ë¡œ í›¨ì”¬ ë” ê¸´ ê°ì† êµ¬ê°„
      if (velocity > 0.4) {
        // ë§¤ìš° ë¹ ë¥¸ êµ¬ê°„: ê±°ì˜ ê°ì†í•˜ì§€ ì•ŠìŒ
        velocity *= 0.995;
      } else if (velocity > 0.2) {
        // ë¹ ë¥¸ êµ¬ê°„: ì•„ì£¼ ì¡°ê¸ˆì”© ê°ì†
        velocity *= 0.992;
      } else if (velocity > 0.1) {
        // ì¤‘ê°„ ë¹ ë¦„ êµ¬ê°„: ì¡°ê¸ˆ ë” ê°ì†
        velocity *= 0.990;
      } else if (velocity > 0.05) {
        // ì¤‘ê°„ êµ¬ê°„: ë³´í†µ ê°ì†
        velocity *= 0.988;
      } else if (velocity > 0.025) {
        // ì¤‘ê°„ ëŠë¦¼ êµ¬ê°„: ë” ì²œì²œíˆ ê°ì†
        velocity *= 0.985;
      } else if (velocity > 0.015) {
        // ëŠë¦° êµ¬ê°„: ë”ìš± ì²œì²œíˆ ê°ì†
        velocity *= 0.982;
      } else if (velocity > 0.008) {
        // ë§¤ìš° ëŠë¦° êµ¬ê°„: ê·¹ë„ë¡œ ì²œì²œíˆ ê°ì†
        velocity *= 0.978;
      } else if (velocity > 0.004) {
        // ê±°ì˜ ì •ì§€ êµ¬ê°„: ê·¹ê·¹íˆ ì²œì²œíˆ ê°ì†
        velocity *= 0.974;
      } else {
        // ë§ˆì§€ë§‰ êµ¬ê°„: ìµœëŒ€í•œ ì²œì²œíˆ ê°ì† (ê·¹ì  íš¨ê³¼)
        velocity *= 0.970;
      }
      
      // ë” ê¸´ êµ¬ê°„ì—ì„œ ì‹œê°ì  íš¨ê³¼ ì¶”ê°€
      if (velocity < 0.025 && velocity > 0.0002) {
        canvas.style.filter = `brightness(${1 + Math.sin(Date.now() * 0.015) * 0.25})`;
      } else {
        canvas.style.filter = 'brightness(1)';
      }
      
      drawWheel();
      
      // í›¨ì”¬ ë” ì‘ì€ ê°’ê¹Œì§€ ëŒë„ë¡ ì¡°ì •
      if (velocity < 0.0002) {
        spinning = false;
        cancelAnimationFrame(rafId);
        canvas.style.filter = 'brightness(1)';
        canvas.classList.remove('spinning'); // íšŒì „ ì¤‘ ìŠ¤íƒ€ì¼ ì œê±°
        showResult();
      } else {
        rafId = requestAnimationFrame(step);
      }
    }

    // ê²°ê³¼ í‘œì‹œ (ê·¹ì ì¸ íš¨ê³¼ ì¶”ê°€)
    function showResult() {
      const pointerAngle = (1.5 * Math.PI - rotation + 2 * Math.PI) % (2 * Math.PI);
      const idx = Math.floor(pointerAngle / slice);
      const selectedItem = currentItems[idx];
      
      // ë“œëŸ¼ë¡¤ íš¨ê³¼ (ê²°ê³¼ í‘œì‹œ ì „ ì ì‹œ ëŒ€ê¸°)
      spinBtn.textContent = "ğŸ¥ ë‘êµ¬ë‘êµ¬...";
      
             setTimeout(() => {
         resultDiv.textContent = selectedItem;
         resultDiv.style.color = colors[idx];
         resultDiv.style.textShadow = `0 0 20px ${colors[idx]}`;
         resultDiv.classList.add('show'); // ê²°ê³¼ ì˜ì—­ í‘œì‹œ
         
         // ë” ê·¹ì ì¸ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
         resultDiv.animate([
           { transform: "scale(0) rotate(-180deg)", opacity: 0 },
           { transform: "scale(1.8) rotate(0deg)", opacity: 0.8 },
           { transform: "scale(1) rotate(0deg)", opacity: 1 }
         ], { duration: 800, easing: "cubic-bezier(0.68, -0.55, 0.265, 1.55)" });
        
        // ì„ íƒëœ ì„¹ì…˜ ê°•ì¡° íš¨ê³¼
        canvas.animate([
          { filter: "brightness(1) saturate(1)" },
          { filter: "brightness(1.5) saturate(1.5)" },
          { filter: "brightness(1) saturate(1)" }
        ], { duration: 1000, easing: "ease-in-out" });
        
             }, 1200); // ë” ê¸´ ë“œëŸ¼ë¡¤ ëŒ€ê¸° ì‹œê°„
      
      // ë‹¨ê³„ë³„ ì²˜ë¦¬
      if (currentStep === 1) {
        // 1ë‹¨ê³„ ì™„ë£Œ: ì¡° ì„ íƒë¨
        selectedTeam = selectedItem.replace('ì¡°', '');
        step1.classList.remove('active');
        step1.classList.add('completed');
        step2.classList.add('active');
        
        setTimeout(() => {
          setupStep2();
        }, 3000); // ë” ê¸´ íšŒì „ ì‹œê°„ì„ ê³ ë ¤í•˜ì—¬ ì¡°ì •
        
      } else {
        // 2ë‹¨ê³„ ì™„ë£Œ: ìµœì¢… ì„ íƒ
        step2.classList.remove('active');
        step2.classList.add('completed');
        stepInfo.innerHTML = `ğŸ‰ ìµœì¢… ì„ íƒ: <strong>${selectedTeam}ì¡° ${selectedItem}</strong> ğŸ‰`;
        spinBtn.style.display = 'none';
        
        // ì¶•í•˜ ì• ë‹ˆë©”ì´ì…˜
        setTimeout(() => {
          showCelebration();
        }, 2000); // ë” ê¸´ íšŒì „ ì‹œê°„ì„ ê³ ë ¤í•˜ì—¬ ì¡°ì •
      }
    }

    // 2ë‹¨ê³„ ì„¤ì •
    function setupStep2() {
      currentStep = 2;
      currentItems = teamGroups[selectedTeam];
      stepInfo.textContent = `2ë‹¨ê³„: ${selectedTeam}ì¡°ì—ì„œ ì„ íƒë  ì˜ˆë¹„ ë¶„ì„ê°€ëŠ” ëˆ„êµ¬ì¸ê°€?`;
      
      initializeWheel();
      
      spinBtn.disabled = false;
      spinBtn.textContent = "ğŸ² ë©¤ë²„ ì„ íƒ!";
      resultDiv.textContent = "";
      resultDiv.classList.remove('show'); // 2ë‹¨ê³„ì—ì„œë„ ê²°ê³¼ ì˜ì—­ ìˆ¨ê¹€
    }

    // Anime.jsë¥¼ ì‚¬ìš©í•œ ì¶•í•˜ í­ì£½ ì• ë‹ˆë©”ì´ì…˜
    function showCelebration() {
      createFireworksBurst();
    }

    // í­ì£½ ë²„ìŠ¤íŠ¸ ìƒì„± í•¨ìˆ˜
    function createFireworksBurst() {
      const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3', '#54a0ff', '#5f27cd'];
      const burstCount = 8; // í­ì£½ í­ë°œ íšŸìˆ˜
      
      for (let i = 0; i < burstCount; i++) {
        setTimeout(() => {
          createSingleFirework();
        }, i * 600);
      }
    }

    // ë‹¨ì¼ í­ì£½ ìƒì„± í•¨ìˆ˜
    function createSingleFirework() {
      const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3', '#54a0ff', '#5f27cd'];
      const startX = Math.random() * window.innerWidth;
      const startY = window.innerHeight;
      const targetX = Math.random() * window.innerWidth;
      const targetY = Math.random() * (window.innerHeight * 0.3) + 100;
      
      // ë¡œì¼“ ë°œì‚¬ íš¨ê³¼
      const rocket = document.createElement('div');
      rocket.className = 'firework-trail';
      rocket.style.left = startX + 'px';
      rocket.style.top = startY + 'px';
      rocket.style.width = '4px';
      rocket.style.height = '20px';
      rocket.style.background = 'linear-gradient(to top, #fff, #ff6b6b)';
      rocket.style.borderRadius = '2px';
      document.body.appendChild(rocket);
      
      // ë¡œì¼“ ì• ë‹ˆë©”ì´ì…˜
      anime({
        targets: rocket,
        left: targetX,
        top: targetY,
        duration: 1000,
        easing: 'easeOutCubic',
        complete: () => {
          // ë¡œì¼“ ì œê±°
          rocket.remove();
          // í­ë°œ íš¨ê³¼ ìƒì„±
          createExplosion(targetX, targetY, colors);
        }
      });
    }

    // í­ë°œ íš¨ê³¼ ìƒì„± í•¨ìˆ˜
    function createExplosion(x, y, colors) {
      const particleCount = 25;
      const particles = [];
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'firework-particle';
        particle.style.left = x + 'px';
        particle.style.top = y + 'px';
        particle.style.width = Math.random() * 8 + 4 + 'px';
        particle.style.height = particle.style.width;
        particle.style.background = colors[Math.floor(Math.random() * colors.length)];
        particle.style.boxShadow = `0 0 10px ${particle.style.background}`;
        document.body.appendChild(particle);
        particles.push(particle);
        
        // ê° íŒŒí‹°í´ì˜ ëœë¤ ë°©í–¥ê³¼ ê±°ë¦¬
        const angle = (Math.PI * 2 * i) / particleCount + (Math.random() - 0.5) * 0.5;
        const distance = Math.random() * 200 + 100;
        const endX = x + Math.cos(angle) * distance;
        const endY = y + Math.sin(angle) * distance + Math.random() * 100;
        
        // íŒŒí‹°í´ ì• ë‹ˆë©”ì´ì…˜
        anime({
          targets: particle,
          left: endX,
          top: endY,
          opacity: [1, 0],
          scale: [1, 0],
          duration: 1500 + Math.random() * 500,
          easing: 'easeOutCubic',
          complete: () => {
            particle.remove();
          }
        });
        
        // ë°˜ì§ì´ëŠ” íš¨ê³¼
        if (Math.random() < 0.3) {
          anime({
            targets: particle,
            opacity: [1, 0.3, 1, 0.3, 1],
            duration: 300,
            easing: 'linear',
            loop: 2
          });
        }
      }
      
      // ì¤‘ì•™ í”Œë˜ì‹œ íš¨ê³¼
      createFlashEffect(x, y);
    }

    // í”Œë˜ì‹œ íš¨ê³¼ ìƒì„± í•¨ìˆ˜
    function createFlashEffect(x, y) {
      const flash = document.createElement('div');
      flash.className = 'firework-spark';
      flash.style.left = (x - 50) + 'px';
      flash.style.top = (y - 50) + 'px';
      flash.style.width = '100px';
      flash.style.height = '100px';
      flash.style.background = 'radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%)';
      flash.style.borderRadius = '50%';
      document.body.appendChild(flash);
      
      anime({
        targets: flash,
        scale: [0, 1.5, 0],
        opacity: [1, 0.7, 0],
        duration: 300,
        easing: 'easeOutCubic',
        complete: () => {
          flash.remove();
        }
      });
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', () => {
      initializeWheel();
      
      // ìŠ¤í•€ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
      spinBtn.addEventListener('click', spin);
    });
  </script>
</body>
</html> 